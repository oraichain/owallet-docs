# Technical Overview

## Context Level

![OWallet-Context](https://i.gyazo.com/cfd7f6b47445f76691339e7b1f80b69b.png)

## Core Components Level

![OWallet-Components](https://i.gyazo.com/4aedd5237de889a3603b68b1d24a6914.png)

## On-chain History Backend Design

![OWallet-HistoryBackend](https://i.gyazo.com/1f6f3b78dbd80843dafc54328570baef.png)

## Structure

<table><thead><tr><th width="273">Packages</th><th>Function</th></tr></thead><tbody><tr><td>analytics</td><td>This package is used to analyze user actions by logging event , page view,... Nothing much about it</td></tr><tr><td>background</td><td>This package is used to handle request of provider to sign, request public/private key,...This is one of the most important directories of the project.</td></tr><tr><td>background/chains</td><td>Used to handle messages related to the chain, such as: handleSuggestChainInfoMsg, handleRemoveSuggestedChainInfoMsg,..</td></tr><tr><td>background/interaction</td><td>Used to handle messages related to user interaction, such as: handleApproveInteractionMsg, handleRejectInteractionMsg</td></tr><tr><td>background/keyring</td><td>Used to handle messages related to the keyring,mnemonic, private key/public key and signing request, such as: CreatePrivateKeyMsg, UnlockKeyRingMsg, RequestSignAminoMsg, RequestSignEthereumMsg, CreateLedgerKeyMsg,...</td></tr><tr><td>background/ledger</td><td>Used to handle messages related to the ledger service, such as: getPublicKey, initLedger,..</td></tr><tr><td>background/permission</td><td>Used to handle messages related to the permission and access, such as: handleEnableAccessMsg, handleGetPermissionOriginsMsg,..</td></tr><tr><td>background/persistent-memory</td><td>Used to handle messages related to the persistent memory, such as: handleSetPersistentMemoryMsg</td></tr><tr><td>background/secret-wasm</td><td>Used to handle messages related to the secret-wasm, such as: handleGetPubkeyMsg,handleReqeustEncryptMsg, handleRequestDecryptMsg..</td></tr><tr><td>background/tokens</td><td>Used to handle messages related to the tokens managerment such as: handleGetTokensMsg,handleSuggestTokenMsg, handleAddTokenMsg..</td></tr><tr><td>background/tx</td><td>Used to handle messages related to the transaction, such as: sendTx ,processTxResultNotification</td></tr><tr><td>background/updater</td><td>Used to handle messages related to the chain update, such as: handleTryUpdateChainMsg</td></tr><tr><td>background/utils</td><td>Used to contain helper functions of background</td></tr><tr><td>bitcoin</td><td>This package contain helper function for BTC</td></tr><tr><td>common</td><td>This package is used to handle common function like fetchTx, helper function,..</td></tr><tr><td>common/api</td><td>Used to contain common functions related to api, includes api utils and api services</td></tr><tr><td>common/axios</td><td>Used to contain common functions related to axios package, like fetchAdapter, getResponse, createError, createRequest</td></tr><tr><td>common/denom</td><td>Used to contain common functions related to denom, like DenomHelper</td></tr><tr><td>common/escape</td><td>Used to contain common functions related to escape html</td></tr><tr><td>common/json</td><td>Used to contain common functions related to json, like sortObjectByKey, sortedJsonByKeyStringify</td></tr><tr><td>common/kv-store</td><td>Used to contain common functions related to kv store, like get/set</td></tr><tr><td>common/mobx</td><td>Used to contain common functions related to mobx</td></tr><tr><td>common/tx</td><td>Used to contain common functions related to transaction, like fetchTx, fetchTxPoll</td></tr><tr><td>common/ui-config</td><td>Used to contain common functions related to ui configuration</td></tr><tr><td>common/niversal-swap</td><td>Used to contain common functions related to universal swap feature, like getTransferTokenFee, getSwapToken, getTokenOnSpecificChainId,...</td></tr><tr><td>common/web3</td><td>Used to create Web3Provider</td></tr><tr><td>common/utils</td><td>Used to contain other common functions, mostly about bigInt/amount formatting</td></tr><tr><td>cosmos</td><td>This package is used to handle cosmos function</td></tr><tr><td>cosmos/account</td><td>Used to contain BaseAccount class, which have basic info about cosmos account like address, account number, sequence</td></tr><tr><td>cosmos/adr-36</td><td>Used to contain functions related to ADR36AminoSignDoc, like checkAndValidateADR36AminoSignDoc, makeADR36AminoSignDoc, verifyADR36Amino</td></tr><tr><td>cosmos/bech32</td><td>Used to contain functions related to bech32 address, like shortenAddress,toBech32,...</td></tr><tr><td>cosmos/chain-id</td><td>Used to contain functions related to chain id, like EthermintChainIdHelper,parse,...</td></tr><tr><td>cosmos/signing</td><td>Used to contain functions related to encode signature and pubkey, like encodeSecp256k1Signature,...</td></tr><tr><td>cosmos/stargate</td><td>Used to contain functions related to stargate, like ProtoCodec,ProtoSignDocDecoder,SignDocWrapper...</td></tr><tr><td>cosmos/tx-tracer</td><td>Used to contain functions related to transaction tracer, like sendSubscribeBlockRpc,subscribeMsgByAddress,...</td></tr><tr><td>crypto</td><td>This package is used to generate wallet,encrypt/decrypt,...</td></tr><tr><td>crypto/mnemonic</td><td>Used to contain functions related to mnemonic, like generateWallet,validateMnemonic,generateWalletFromMnemonic...</td></tr><tr><td>crypto/hash</td><td>Used to contain functions related to hash function, like keccak256,truncHashPortion...</td></tr><tr><td>crypto/key</td><td>Used to contain functions related to private key and pubkey,includes PrivKeySecp256k1 class and PubKeySecp256k1 class</td></tr><tr><td>ens</td><td>This package is used to handle ens, like isValidENS, fetchResolverAddress,...</td></tr><tr><td>hooks</td><td>This package is used to contain common hooks</td></tr><tr><td>hooks/address-book</td><td>Used to contain hook related to address book, like useAddressBookConfig</td></tr><tr><td>hooks/ibc</td><td>Used to contain hook related to ibc, like useIBCAmountConfig, useIBCTransferGasConfig, useIBCTransferConfig,...</td></tr><tr><td>hooks/interaction</td><td>Used to contain hook related to Interaction info, like useInteractionInfo</td></tr><tr><td>hooks/register</td><td>Used to contain hook related to register, like useRegisterConfig</td></tr><tr><td>hooks/tx</td><td>Used to contain hook related to transaction, like useFeeEvmConfig, useGasEvmConfig, useGasConfig, useAmountConfig,...</td></tr><tr><td>hooks/universal-swap</td><td>Used to contain hook related to universal swap, like useCoinGeckoPrices, useRelayerFee, useTaxRate,...</td></tr><tr><td>hooks/sign-doc</td><td>Used to contain hook related to sign doc, like useSignDocAmountConfig</td></tr><tr><td>provider</td><td>This package provides functions for dApps to communicate with the background</td></tr><tr><td>provider/core</td><td>Used to contain core functions of wallet injector, like OWallet signDirect, getOfflineSigner, suggestToken,... This is where we create all of the wallet instances that are injected into the dApps.</td></tr><tr><td>provider/cosmjs</td><td>Used to contain cosmjs function, like CosmJSOfflineSignerOnlyAmino class,CosmJSOfflineSigner class,signAmino,signDirect,...</td></tr><tr><td>provider/enigma</td><td>Used to contain engma utils function, like getEnigmaPubKey, enigmaEncrypt, enigmaDecrypt,...</td></tr><tr><td>provider/inject</td><td>Used to create injector, and handle message of dApps like a proxy</td></tr><tr><td>provider/msgs</td><td>Used to create provider messages</td></tr><tr><td>router</td><td>This package is used to routing app message bettween provider and background</td></tr><tr><td>router-extension</td><td>Same with router, but more specified for extension</td></tr><tr><td>router-mock</td><td>Router mockup</td></tr><tr><td>mobile</td><td>This package contain mobile app code</td></tr><tr><td>extension</td><td>This package contain extension app code</td></tr><tr><td>stores</td><td>This package is used to handle store function, includes update/add info chains, tokens, price, query,...Basically, it contain all the functions and property of account, query, chain,...etc that we need and interact with in the app.This is one of the most important directories of the project.</td></tr><tr><td>stores/account</td><td>Account store, used to handle and store all the functions and property related to account, like processSendToken, simulateTx,... it prepare data, create msg and send it into background</td></tr><tr><td>stores/chain</td><td>Chain store, used to handle and store all the functions and property related to chain, like setChainInfo, findCurrency,..</td></tr><tr><td>stores/common</td><td>Used to contain common utils functions of store</td></tr><tr><td>stores/core</td><td>Used to contain core functions of store</td></tr><tr><td>stores/ibc</td><td>Used to contain function of ibc store, like channel, currency-registrar</td></tr><tr><td>stores/price</td><td>Used to contain price store functions and property</td></tr><tr><td>stores/query</td><td>Used to contain query store functions and property, like ObservableQueryAccount, ObservableQueryBalanceNative,...</td></tr><tr><td>types</td><td>This package contain project all kind of types</td></tr><tr><td>unit</td><td>This package contain project unit helper function, like CoinPretty, DecUtils, PricePretty</td></tr><tr><td>proto-types</td><td>For generate package proto types</td></tr><tr><td>wc-client &#x26; wc-qrcode-modal</td><td>For wallet connect(not implemented yet)</td></tr></tbody></table>
